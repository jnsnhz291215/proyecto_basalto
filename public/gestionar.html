<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestionar Trabajadores</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="styleg.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="js/navbar_core.js"></script>
  <script src="auth_guard.js"></script>
  <script src="navbar.js"></script>
  <style>
    /* Asegurar que la p√°gina gestionar tenga el mismo font que las otras vistas */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background-color: #f3f4f6; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; color: #1f2937; padding: 20px; margin: 0; }
  </style>
</head>
<body>
  <!-- Shared menu will be injected here -->
  <div id="shared-menu-placeholder"></div>
  <script>
    fetch('menu.html').then(r => r.text()).then(html => {
      const wrapper = document.createElement('div');
      wrapper.innerHTML = html;
      document.body.insertBefore(wrapper, document.body.firstChild);
      // Inicializar men√∫ (toggle y activo)
      const btn = wrapper.querySelector('#nav-toggle');
      const items = wrapper.querySelector('#nav-items');
      if (btn && items) btn.addEventListener('click', () => items.classList.toggle('show'));
      try { if (window.syncNavbarActive) window.syncNavbarActive(); } catch(e) {}
      // Menu hamburguesa en m√≥vil: toggle nav-items y nav-right
      if (btn && items) {
        btn.addEventListener('click', () => {
          items.classList.toggle('show');
          const navRight = wrapper.querySelector('#usuario-container');
          if (navRight) navRight.classList.toggle('show');
        });
        const navLinks = items.querySelectorAll('a');
        navLinks.forEach(link => {
          link.addEventListener('click', () => {
            items.classList.remove('show');
            const navRight = wrapper.querySelector('#usuario-container');
            if (navRight) navRight.classList.remove('show');
          });
        });
      }
      // usuario dropdown + session visibility
      try {
        const userToggle = wrapper.querySelector('.user-toggle');
        const userMenu = wrapper.querySelector('.user-menu');
        if (userToggle && userMenu) {
          userToggle.addEventListener('click', (ev) => { ev.stopPropagation(); userMenu.classList.toggle('show'); userToggle.setAttribute('aria-expanded', userMenu.classList.contains('show')); });
          document.addEventListener('click', (ev) => { if (!userMenu.contains(ev.target) && !userToggle.contains(ev.target)) { userMenu.classList.remove('show'); userToggle.setAttribute('aria-expanded', 'false'); } });
        }
        const logoutBtn = wrapper.querySelector('.user-menu .danger');
        if (logoutBtn) logoutBtn.addEventListener('click', (ev) => { ev.preventDefault(); localStorage.removeItem('usuarioActivo'); window.location.href = '/index.html'; });
        // session handling: hide user dropdown if no session, show gestionar only for admin
        try {
          const s = localStorage.getItem('usuarioActivo');
          const navGest = wrapper.querySelector('#nav-gestionar');
          const navRight = wrapper.querySelector('.nav-right');
          if (!s) {
            if (navRight) navRight.style.display = 'none';
            if (navGest) navGest.style.display = 'none';
          } else {
            const u = JSON.parse(s);
            const nameEl = wrapper.querySelector('.user-name'); if (nameEl && u && u.nombre) nameEl.textContent = u.nombre;
            if (navRight) navRight.style.display = '';
            if (navGest) navGest.style.display = (u && u.rol === 'admin') ? '' : 'none';
          }
        } catch(e){}
      } catch(e){}
      // update interface now that menu is injected
      try { if (window.actualizarInterfaz) window.actualizarInterfaz(); } catch(e){}
    }).catch(err => console.error('No se pudo cargar el men√∫:', err));
  </script>

  <div class="gestionar-container">
    <!-- Header con controles -->
    <header class="gestionar-header">
      <button id="btn-agregar" class="btn btn-agregar">Agregar trabajador</button>
      <button id="btn-descargar" class="btn btn-primary">Descargar Trabajadores</button>
      <button id="btn-config-ciclos" class="btn btn-config" title="Configurar ciclos de turnos" style="background-color: #8b5cf6; color: white; padding: 10px 18px; border: none; border-radius: 8px; font-family: inherit; font-size: 14px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 8px;">
        <i class="fa-solid fa-sliders"></i> Configurar Ciclos
      </button>
      <input type="text" id="input-buscar" class="input-buscar" placeholder="Buscar" autocomplete="off">
      <div class="filtro-wrap">
        <label for="select-filtro">Filtrar:</label>
        <select id="select-filtro">
          <option value="">Todos los grupos</option>
          <option value="sin_grupo">Sin Grupo / Por Asignar</option>
        </select>
      </div>

      <!-- Switch para mostrar inactivos -->
      <div style="display: flex; align-items: center; gap: 10px; margin-left: 20px;">
        <label for="mostrar-inactivos" style="font-size: 14px; color: #374151; font-weight: 500; display: flex; align-items: center; gap: 6px; cursor: pointer;">
          <input type="checkbox" id="mostrar-inactivos" style="cursor: pointer; width: 16px; height: 16px;">
          <span>Mostrar ocultos</span>
        </label>
      </div>
    </header>

    <!-- √Årea de columnas por grupo (scroll horizontal) -->
    <div class="table-wrapper">
      <div class="grupos-scroll">
        <div id="grupos-columnas" class="grupos-columnas"></div>
      </div>
    </div>
  </div>

  <!-- Modal editar trabajador -->
  <div id="modal-editar" class="modal">
    <div class="modal-content modal-card">
      <div class="modal-header">
        <h3 class="modal-title">
          <i class="fa-solid fa-user-pen highlight-icon"></i> Editar Trabajador
        </h3>
      </div>
      <div class="modal-body">
        <form id="form-editar">
          <div class="form-section-label">Informaci√≥n Personal</div>
          <div class="form-grid">
            <div class="form-group">
              <label for="edit-nombre">Nombres</label>
              <div class="input-wrapper">
                <i class="fa-regular fa-user input-icon"></i>
                <input type="text" id="edit-nombre" name="nombre" placeholder="Ej: Juan Andr√©s" class="modern-input" required>
              </div>
            </div>
            <div class="form-group">
              <label for="edit-apellido">Apellidos</label>
              <input type="text" id="edit-apellido" name="apellido" placeholder="Ej: P√©rez Gonz√°lez" class="modern-input plain" required>
            </div>
            <div class="form-group">
              <label for="edit-rut">RUT <span class="info-text">(sin puntos)</span></label>
              <div class="input-wrapper">
                <i class="fa-solid fa-id-card input-icon"></i>
                <input type="text" id="edit-rut" name="rut" placeholder="12345678-9" class="modern-input" required readonly>
              </div>
            </div>
            <div class="form-group">
              <label for="edit-telefono">Tel√©fono</label>
              <div class="phone-input-group">
                <span class="country-code">üá®üá± +56</span>
                <input type="tel" id="edit-telefono" name="telefono" placeholder="9 1234 5678" class="modern-input" maxlength="9">
              </div>
            </div>
            <div class="form-group">
              <label for="edit-ciudad">Ciudad</label>
              <div class="select-wrapper">
                <select id="edit-ciudad" name="ciudad" class="modern-input">
                  <option value="" disabled selected>Seleccione una ciudad...</option>
                </select>
                <i class="fa-solid fa-chevron-down select-arrow"></i>
              </div>
              <button type="button" id="btn-nueva-ciudad-edit" class="btn-link" style="margin-top:6px;background:none;border:0;color:#8b5cf6;font-weight:600;cursor:pointer;padding:0">
                + Nueva Ciudad
              </button>
            </div>
            <div class="form-group">
              <label for="edit-fecha-nacimiento">Fecha de Nacimiento</label>
              <div class="input-wrapper">
                <i class="fa-solid fa-cake-candles input-icon"></i>
                <input type="date" id="edit-fecha-nacimiento" name="fecha_nacimiento" class="modern-input">
              </div>
            </div>
            <div class="form-group full-width">
              <label for="edit-email">Correo Electr√≥nico</label>
              <div class="input-wrapper">
                <i class="fa-regular fa-envelope input-icon"></i>
                <input type="email" id="edit-email" name="email" placeholder="nombre@correo.com" class="modern-input">
              </div>
            </div>
          </div>
          <div class="separator-line"></div>
          <div class="form-section-label">Datos de Faena</div>
          <div class="form-grid">
            <div class="form-group">
              <label for="edit-cargo">Cargo</label>
              <div class="select-wrapper">
                <select id="edit-cargo" name="cargo" class="modern-input">
                  <option value="" disabled selected>Seleccione un cargo...</option>
                </select>
                <i class="fa-solid fa-chevron-down select-arrow"></i>
              </div>
            </div>
            <div class="form-group">
              <label for="edit-grupo">Asignar Grupo</label>
              <div class="select-wrapper">
                <select id="edit-grupo" name="grupo" class="modern-input">
                  <option value="" disabled>Seleccione...</option>
                  <option value="A">Grupo A</option>
                  <option value="B">Grupo B</option>
                  <option value="C">Grupo C</option>
                  <option value="D">Grupo D</option>
                  <option value="E">Grupo E</option>
                  <option value="F">Grupo F</option>
                  <option value="G">Grupo G</option>
                  <option value="H">Grupo H</option>
                  <option value="AB">Grupo AB (Refuerzo)</option>
                  <option value="CD">Grupo CD (Refuerzo)</option>
                  <option value="EF">Grupo EF (Refuerzo)</option>
                  <option value="GH">Grupo GH (Refuerzo)</option>
                  <option value="J">Grupo J (Lun‚ÄìJue)</option>
                  <option value="K">Grupo K (Mar‚ÄìVie)</option>
                </select>
                <i class="fa-solid fa-chevron-down select-arrow"></i>
              </div>
            </div>
          </div>
          <div class="modal-footer" style="margin-top:18px;display:flex;justify-content:flex-end;gap:12px">
            <button type="button" id="cancel-edit" class="btn-cancel">Cancelar</button>
            <button type="submit" class="btn-save"><i class="fa-solid fa-check"></i> Guardar Cambios</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal agregar trabajador -->
  <div id="modal-agregar" class="modal">
    <div class="modal-content modal-card">
      <div class="modal-header">
        <h3 class="modal-title">
          <i class="fa-solid fa-user-plus highlight-icon"></i> Agregar Trabajador
        </h3>
      </div>

      <div class="modal-body">
        <form id="form-agregar">
          <div class="form-section-label">Informaci√≥n Personal</div>
          <div class="form-grid">
            <div class="form-group">
              <label for="nombre">Nombres</label>
              <div class="input-wrapper">
                <i class="fa-regular fa-user input-icon"></i>
                <input type="text" id="nombre" name="nombre" placeholder="Ej: Juan Andr√©s" class="modern-input" required>
              </div>
            </div>
            <div class="form-group">
              <label for="apellido">Apellidos</label>
              <input type="text" id="apellido" name="apellido" placeholder="Ej: P√©rez Gonz√°lez" class="modern-input plain" required>
            </div>

            <div class="form-group">
              <label for="rut">RUT <span class="info-text">(sin puntos)</span></label>
              <div class="input-wrapper">
                <i class="fa-solid fa-id-card input-icon"></i>
                <input type="text" id="rut" name="rut" placeholder="12345678-9" class="modern-input" required>
              </div>
            </div>

            <div class="form-group">
              <label for="telefono">Tel√©fono</label>
              <div class="phone-input-group">
                <span class="country-code">üá®üá± +56</span>
                <input type="tel" id="telefono" name="telefono" placeholder="9 1234 5678" class="modern-input" maxlength="9">
              </div>
            </div>

            <div class="form-group">
              <label for="ciudad">Ciudad</label>
              <div class="select-wrapper">
                <select id="ciudad" name="ciudad" class="modern-input">
                  <option value="" disabled selected>Seleccione una ciudad...</option>
                </select>
                <i class="fa-solid fa-chevron-down select-arrow"></i>
              </div>
              <button type="button" id="btn-nueva-ciudad" class="btn-link" style="margin-top:6px;background:none;border:0;color:#8b5cf6;font-weight:600;cursor:pointer;padding:0">
                + Nueva Ciudad
              </button>
            </div>

            <div class="form-group">
              <label for="fecha-nacimiento">Fecha de Nacimiento</label>
              <div class="input-wrapper">
                <i class="fa-solid fa-cake-candles input-icon"></i>
                <input type="date" id="fecha-nacimiento" name="fecha_nacimiento" class="modern-input">
              </div>
            </div>

            <div class="form-group full-width">
              <label for="email">Correo Electr√≥nico</label>
              <div class="input-wrapper">
                <i class="fa-regular fa-envelope input-icon"></i>
                <input type="email" id="email" name="email" placeholder="nombre@correo.com" class="modern-input">
              </div>
            </div>
          </div>

          <div class="separator-line"></div>
          <div class="form-section-label">Datos de Faena</div>

          <div class="form-grid">
            <div class="form-group">
              <label for="cargo">Cargo</label>
              <div class="select-wrapper">
                <select id="cargo" name="cargo" class="modern-input">
                  <option value="" disabled selected>Seleccione un cargo...</option>
                </select>
                <i class="fa-solid fa-chevron-down select-arrow"></i>
              </div>
            </div>

            <div class="form-group">
              <label for="grupo">Asignar Grupo</label>
              <div class="select-wrapper">
                <select id="grupo" name="grupo" class="modern-input">
                  <option value="" disabled selected>Seleccione...</option>
                  <option value="A">Grupo A</option>
                  <option value="B">Grupo B</option>
                  <option value="C">Grupo C</option>
                  <option value="D">Grupo D</option>
                  <option value="E">Grupo E</option>
                  <option value="F">Grupo F</option>
                  <option value="G">Grupo G</option>
                  <option value="H">Grupo H</option>
                  <option value="AB">Grupo AB (Refuerzo)</option>
                  <option value="CD">Grupo CD (Refuerzo)</option>
                  <option value="EF">Grupo EF (Refuerzo)</option>
                  <option value="GH">Grupo GH (Refuerzo)</option>
                  <option value="J">Grupo J (Lun‚ÄìJue)</option>
                  <option value="K">Grupo K (Mar‚ÄìVie)</option>
                </select>
                <i class="fa-solid fa-chevron-down select-arrow"></i>
              </div>
            </div>
          </div>

          <div class="modal-footer" style="margin-top:18px;display:flex;justify-content:flex-end;gap:12px">
            <button type="button" id="cancel-add" class="btn-cancel">Cancelar</button>
            <button type="submit" class="btn-save"><i class="fa-solid fa-check"></i> Agregar Trabajador</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal: Configurar Ciclos -->
  <div id="modal-config-ciclos" class="modal">
    <div class="modal-content modal-card" style="max-width: 550px;">
      <div class="modal-header">
        <h3 class="modal-title">
          <i class="fa-solid fa-sliders highlight-icon"></i> Configurar Ciclos de Turnos
        </h3>
        <button type="button" class="close-modal" id="close-config-modal">&times;</button>
      </div>
      <form id="form-config-ciclos">
        <div class="modal-body">
          <p style="color: #6b7280; font-size: 14px; margin-bottom: 20px;">
            Ajusta la fecha semilla y el nombre de la pista base. <strong>Pista 2</strong> se calcular√° autom√°ticamente con +7 d√≠as de desfase.
          </p>

          <!-- Campo: Nombre de la Pista -->
          <div class="form-group">
            <label for="modal-pista-nombre">Nombre de la Pista</label>
            <div class="input-wrapper">
              <i class="fa-solid fa-tag input-icon"></i>
              <input type="text" id="modal-pista-nombre" name="pista_nombre" class="modern-input" placeholder="Ej: Pista 1" required>
            </div>
            <small style="color: #9ca3af; font-size: 12px;">Identifica la pista base de configuraci√≥n (Ej: Pista 1, Pista A)</small>
          </div>

          <!-- Campo: Fecha Semilla -->
          <div class="form-group">
            <label for="modal-fecha-semilla">Fecha Semilla (DD/MM/YYYY)</label>
            <div class="input-wrapper">
              <i class="fa-solid fa-calendar-days input-icon"></i>
              <input type="text" id="modal-fecha-semilla" name="fecha_semilla" class="modern-input" placeholder="07/02/2026" maxlength="10" required>
            </div>
            <small style="color: #9ca3af; font-size: 12px;">Fecha donde inicia el ciclo. Escribe en formato DD/MM/YYYY</small>
          </div>

          <!-- Informaci√≥n adicional -->
          <div style="background-color: #f0f9ff; border-left: 4px solid #3b82f6; padding: 12px; border-radius: 6px; margin-top: 16px;">
            <div style="display: flex; align-items: flex-start; gap: 10px;">
              <i class="fa-solid fa-circle-info" style="color: #3b82f6; font-size: 16px; margin-top: 2px;"></i>
              <div style="font-size: 13px; color: #1e40af;">
                <strong>Nota:</strong> Al guardar, el calendario se actualizar√° autom√°ticamente para reflejar la nueva configuraci√≥n.
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer" style="margin-top: 18px; display: flex; justify-content: flex-end; gap: 12px;">
          <button type="button" id="btn-cancelar-config-modal" class="btn-cancel">Cancelar</button>
          <button type="submit" class="btn-save">
            <i class="fa-solid fa-floppy-disk"></i> Guardar Configuraci√≥n
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal confirmaci√≥n (borrar) -->
  <div id="modal-confirm" class="modal">
    <div class="modal-content modal-confirm">
      <h3 id="confirm-title">Confirmar</h3>
      <p id="confirm-msg">¬øEliminar a este trabajador?</p>
      <div class="form-buttons">
        <button type="button" id="confirm-cancel" class="btn btn-secondary">Cancelar</button>
        <button type="button" id="confirm-ok" class="btn btn-danger">Borrar</button>
      </div>
    </div>
  </div>

  <!-- Modal resultado (agregar trabajador) -->
  <div id="modal-result" class="modal">
    <div class="modal-content">
      <h3 id="result-title">Resultado</h3>
      <p id="result-msg"></p>
      <div class="form-buttons">
        <button type="button" id="result-ok" class="btn btn-primary">OK</button>
      </div>
    </div>
  </div>

  <script type="module" src="gestionapp.js"></script>

  <!-- Modal Nuevo Cargo -->
  <div id="modal-nuevo-cargo" class="modal">
    <div class="modal-content" style="max-width: 450px;">
      <div class="modal-header">
        <h3 class="modal-title">Crear nuevo cargo</h3>
      </div>
      
      <div class="modal-body">
        <div class="form-group">
          <label for="nuevoNombreCargo">Nombre del cargo</label>
          <div class="input-wrapper">
            <i class="fa-solid fa-helmet-safety input-icon"></i>
            <input type="text" id="nuevoNombreCargo" placeholder="Ej: Mec√°nico" class="modern-input" autocomplete="off">
          </div>
        </div>
      </div>

      <div class="modal-footer" style="margin-top: 18px; display: flex; justify-content: flex-end; gap: 12px;">
        <button type="button" id="cancel-nuevo-cargo" class="btn-cancel">Cancelar</button>
        <button type="button" id="guardar-nuevo-cargo" class="btn-save">
          <i class="fa-solid fa-check"></i> Guardar Cargo
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Gestionar Desfase de Turno -->
  <div id="modal-excepciones" class="modal">
    <div class="modal-content modal-card" style="max-width: 550px;">
      <div class="modal-header">
        <h3 class="modal-title">
          <i class="fa-solid fa-calendar-days highlight-icon"></i> Gestionar Desfase de Turno
        </h3>
      </div>

      <div class="modal-body">
        <div class="form-section-label">
          Trabajador: <strong id="excepcion-trabajador-nombre"></strong>
        </div>

        <form id="form-excepciones">
          <div class="form-grid">
            <div class="form-group">
              <label for="excepcion-fecha-inicio">Fecha Inicio</label>
              <div class="input-wrapper">
                <i class="fa-solid fa-calendar-check input-icon"></i>
                <input type="date" id="excepcion-fecha-inicio" class="modern-input" required>
              </div>
            </div>

            <div class="form-group">
              <label for="excepcion-fecha-fin">Fecha Fin</label>
              <div class="input-wrapper">
                <i class="fa-solid fa-calendar-xmark input-icon"></i>
                <input type="date" id="excepcion-fecha-fin" class="modern-input" required>
              </div>
            </div>

            <div class="form-group full-width">
              <label for="excepcion-motivo">Motivo <span class="info-text">(opcional)</span></label>
              <div class="input-wrapper">
                <i class="fa-solid fa-memo input-icon"></i>
                <textarea id="excepcion-motivo" class="modern-input" rows="2" placeholder="Ej: Entrada tard√≠a, salida anticipada, licencia m√©dica..."></textarea>
              </div>
            </div>
          </div>

          <!-- Indicador de duraci√≥n -->
          <div id="excepcion-duracion-info" style="margin-top: 16px; padding: 12px; border-radius: 8px; display: none;">
            <div style="display: flex; align-items: center; gap: 8px; font-weight: 600;">
              <i class="fa-solid fa-hourglass-half"></i>
              <span id="excepcion-duracion-texto"></span>
            </div>
            <div id="excepcion-advertencia" style="margin-top: 8px; display: none; color: #d97706; font-size: 14px;">
              <i class="fa-solid fa-triangle-exclamation"></i> <strong>Atenci√≥n:</strong> Turno irregular de <span id="excepcion-dias-texto"></span> d√≠as
            </div>
          </div>

          <!-- Historial de excepciones -->
          <div class="separator-line" style="margin: 20px 0;"></div>
          <div class="form-section-label">
            <i class="fa-solid fa-clock-rotate-left"></i> Historial de Excepciones
          </div>
          <div id="excepcion-historial" style="max-height: 150px; overflow-y: auto; margin-top: 10px;">
            <p style="color: #6b7280; font-size: 14px; text-align: center; padding: 10px;">Cargando historial...</p>
          </div>

          <div class="modal-footer" style="margin-top: 18px; display: flex; justify-content: flex-end; gap: 12px;">
            <button type="button" id="cancel-excepciones" class="btn-cancel">Cancelar</button>
            <button type="submit" id="guardar-excepcion" class="btn-save">
              <i class="fa-solid fa-floppy-disk"></i> Guardar Excepci√≥n
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal Ocultar/Reactivar Trabajador -->
  <div id="modal-ocultar" class="modal">
    <div class="modal-content modal-card" style="max-width: 450px;">
      <div class="modal-header">
        <h3 class="modal-title">
          <i class="fa-solid fa-eye-slash highlight-icon" id="ocultar-icon"></i>
          <span id="ocultar-titulo">Ocultar Trabajador</span>
        </h3>
      </div>

      <div class="modal-body">
        <div style="display: flex; align-items: flex-start; gap: 12px; padding: 12px; background-color: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b; margin-bottom: 16px;">
          <i class="fa-solid fa-triangle-exclamation" style="color: #d97706; margin-top: 2px;"></i>
          <div>
            <p style="margin: 0; font-weight: 600; color: #92400e;">Confirmar acci√≥n</p>
            <p id="ocultar-mensaje" style="margin: 4px 0 0 0; font-size: 14px; color: #78350f;">
              ¬øDesea ocultar a este trabajador? No se perder√° su historial.
            </p>
          </div>
        </div>

        <div style="padding: 12px; background-color: #f3f4f6; border-radius: 8px; border-left: 4px solid #6b7280;">
          <p style="margin: 0 0 8px 0; font-size: 13px; font-weight: 600; color: #374151;">Trabajador:</p>
          <p id="ocultar-nombre-trabajador" style="margin: 0; font-size: 15px; font-weight: 600; color: #1f2937;">‚Äî</p>
        </div>
      </div>

      <div class="modal-footer" style="margin-top: 18px; display: flex; justify-content: flex-end; gap: 12px;">
        <button type="button" id="cancel-ocultar" class="btn-cancel">Cancelar</button>
        <button type="button" id="confirm-ocultar" class="btn-save">
          <i class="fa-solid fa-check"></i> <span id="confirm-ocultar-texto">Ocultar</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Eliminar Definitivamente -->
  <div id="modal-eliminar" class="modal">
    <div class="modal-content modal-card" style="max-width: 480px;">
      <div class="modal-header">
        <h3 class="modal-title">
          <i class="fa-solid fa-trash highlight-icon" style="color: #dc2626;"></i> Eliminar Definitivamente
        </h3>
      </div>

      <div class="modal-body">
        <div style="display: flex; align-items: flex-start; gap: 12px; padding: 12px; background-color: #fee2e2; border-radius: 8px; border-left: 4px solid #dc2626; margin-bottom: 16px;">
          <i class="fa-solid fa-circle-exclamation" style="color: #dc2626; margin-top: 2px;"></i>
          <div>
            <p style="margin: 0; font-weight: 700; color: #7f1d1d; font-size: 14px;">‚ö†Ô∏è ADVERTENCIA</p>
            <p style="margin: 6px 0 0 0; font-size: 13px; color: #991b1b; line-height: 1.5;">
              Esta acci√≥n <strong>NO se puede deshacer</strong> y borrar√° <strong>TODO el registro</strong> del trabajador incluyendo su historial de turnos, excepciones, y logs.
            </p>
          </div>
        </div>

        <div style="padding: 12px; background-color: #f3f4f6; border-radius: 8px; border-left: 4px solid #6b7280; margin-bottom: 16px;">
          <p style="margin: 0 0 8px 0; font-size: 13px; font-weight: 600; color: #374151;">Trabajador a eliminar:</p>
          <p id="eliminar-nombre-trabajador" style="margin: 0; font-size: 15px; font-weight: 600; color: #1f2937;">‚Äî</p>
        </div>

        <div class="form-group">
          <label for="eliminar-password">Contrase√±a de Administrador</label>
          <div class="input-wrapper">
            <i class="fa-solid fa-key input-icon"></i>
            <input type="password" id="eliminar-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="modern-input" autocomplete="off" required>
          </div>
          <small style="color: #6b7280; font-size: 12px; margin-top: 4px; display: block;">
            Se requiere tu contrase√±a para confirmar la eliminaci√≥n definitiva
          </small>
        </div>
      </div>

      <div class="modal-footer" style="margin-top: 18px; display: flex; justify-content: flex-end; gap: 12px;">
        <button type="button" id="cancel-eliminar" class="btn-cancel">Cancelar</button>
        <button type="button" id="confirm-eliminar" class="btn btn-danger">
          <i class="fa-solid fa-trash"></i> Eliminar Definitivamente
        </button>
      </div>
    </div>
  </div>
</body>
</html>
