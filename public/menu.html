<header class="top-menu">
  <nav class="nav">
    <div class="nav-left">
      <!-- Logo (no clickeable) -->
      <span class="nav-logo-link">
        <img src="IMG/logoBASALTO.png" alt="Basalto Drilling" class="nav-logo-img">
      </span>
    </div>
    <ul class="nav-items" id="nav-items">
      <li id="nav-inicio" class="nav-item"><a href="index.html">Inicio</a></li>
      <li id="nav-gestionar-parent" class="nav-item dropdown admin-only">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownGestionar" role="button" aria-expanded="false">
          Gestionar
        </a>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdownGestionar">
          <li>
            <a class="dropdown-item" href="gestionar.html">
              <i class="fa-solid fa-users"></i> Trabajadores
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="gestionviajes.html">
              <i class="fa-solid fa-bus"></i> Viajes
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="gestioninformes.html">
              <i class="fa-solid fa-clipboard-list"></i> Informes
            </a>
          </li>
        </ul>
      </li>
      <li id="nav-informe" class="nav-item"><a href="informe.html">Informe de turno</a></li>
      <li id="nav-viajes" class="nav-item"><a href="viajes.html">Viajes</a></li>
    </ul>
    <div class="nav-right" id="usuario-container">
      <button id="nav-login-btn" class="btn btn-login-nav" onclick="abrirLoginModal()" style="display:none;"><i class="fa-solid fa-user"></i> Iniciar Sesión</button>
      <div class="dropdown" id="user-dropdown" style="display:none;">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="user_toggle_btn" aria-expanded="false" aria-haspopup="true">
          <i class="fas fa-user"></i> <span id="user_name_span">Usuario</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end" id="user_dropdown_menu" role="menu" aria-hidden="true">
          <li id="nav-datos"><a class="dropdown-item" href="datos.html"><i class="fa-solid fa-user"></i> Mi Perfil</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item text-danger" href="#" id="btn_logout"><i class="fa-solid fa-sign-out-alt"></i> Cerrar Sesión</a></li>
        </ul>
      </div>
    </div>
    <button id="nav-toggle" class="nav-toggle" aria-label="Mostrar menú">☰</button>
  </nav>
</header>

<style>
  .top-menu{
    background-color:#ffffff;
    border-bottom:1px solid #e5e7eb;
    position:sticky;
    top:0;
    z-index:1200;
    padding:1rem 2rem;
    box-shadow:0 1px 2px 0 rgba(0,0,0,0.05);
    display: flex !important;  /* FORZAR VISIBILIDAD */
  }
  .nav{
    max-width:1200px;
    margin:0 auto;
    display:flex !important;  /* FORZAR VISIBILIDAD */
    align-items:center;
    justify-content:space-between;
    padding:0;
    position:relative;
    width:100%;
  }
  .nav-logo-link{display:inline-block}
  .nav-logo-img{height:70px; width:auto; display:block}
  .nav-logo{font-weight:800;color:#111827;text-decoration:none;font-size:34px;letter-spacing:-0.025em}
  .nav-items{
    list-style:none;
    margin:0;
    padding:0;
    display:flex !important;  /* FORZAR VISIBILIDAD */
    gap:14px;
    align-items:center;
  }
  .nav-item {
    display: block;  /* Permitir ocultar <li> individualmente */
  }
  .nav-item a{
    color:#1f2937;
    text-decoration:none;
    padding:8px 12px;
    border-radius:8px;
    font-weight:600;
    background:transparent;
    display:block;
  }
  .nav-item a:hover{background:#f3f4f6}
  .nav-item a.active{background:#4f46e5;color:#fff}
  .nav-item a.active:hover{background:#4338ca}
  .nav-toggle{display:none;background:transparent;border:0;font-size:22px;cursor:pointer}
  .nav-right{display:flex;align-items:center;gap:12px}
  .dropdown{position:relative}
  .dropdown-toggle{display:flex;align-items:center;gap:8px;background:transparent;border:0;cursor:pointer;padding:6px 10px;border-radius:8px}
  .nav-link.dropdown-toggle{color:#1f2937;text-decoration:none;padding:8px 12px;border-radius:8px;font-weight:600;background:transparent;display:flex;align-items:center;gap:4px}
  .nav-link.dropdown-toggle:hover{background:#f3f4f6}
  .nav-item.dropdown{position:relative}
  .dropdown-menu{display:none;position:absolute;left:0;top:100%;background:#fff;border:none;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,0.2);min-width:200px;padding:8px;z-index:1300;list-style:none;margin:0;margin-top:4px}
  .dropdown-menu.show{display:block}
  .dropdown-menu-dark{background:#1f2937}
  .dropdown-menu-dark .dropdown-item{color:#f9fafb}
  .dropdown-menu-dark .dropdown-item:hover{background:#374151}
  
  /* Puente invisible para evitar que el menú se cierre al mover el mouse hacia abajo */
  .nav-item.dropdown .dropdown-menu::before {
    content: "";
    position: absolute;
    top: -15px;
    left: 0;
    width: 100%;
    height: 15px;
    display: block;
  }
  
  /* Estilo personalizado para el dropdown de Basalto Drilling */
  .nav-item.dropdown .dropdown-menu {
    background-color: #ffffff !important;
    border: 1px solid rgba(0,0,0,0.1);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    padding: 0.5rem 0;
  }
  
  .nav-item.dropdown .dropdown-item {
    color: #334155 !important;
    font-weight: 500;
    padding: 0.6rem 1.2rem;
    transition: all 0.2s ease;
  }
  
  .nav-item.dropdown .dropdown-item i {
    color: #9333ea !important;
    width: 20px;
    text-align: center;
  }
  
  /* Efecto Hover en los items */
  .nav-item.dropdown .dropdown-item:hover {
    background-color: #f3e8ff !important;
    color: #9333ea !important;
    padding-left: 1.5rem;
  }
  .nav-item.dropdown .dropdown-item.active {
    background-color: #4f46e5 !important;
    color: #ffffff !important;
  }
  .nav-item.dropdown .dropdown-item.active i {
    color: #ffffff !important;
  }
  .dropdown-item i{font-size:16px;width:20px;text-align:center}
  /* Efecto Hover en Desktop */
  @media (min-width: 992px) {
    .nav-item.dropdown:hover .dropdown-menu {
      display: block;
    }
  }
  .dropdown-divider{height:1px;background:#f3f4f6;margin:6px 0;border:0}
  .text-danger{color:#ef4444}
  
  /* ============================================ */
  /* CSS DE EMERGENCIA - Z-INDEX Y ESTILOS BOTONES */
  /* ============================================ */
  
  /* Z-index máximo para menú de usuario */
  #user_dropdown_menu {
    z-index: 9999 !important;
  }
  
  /* Estilos para botones del navbar */
  .btn {
    padding: 8px 16px;
    border: none;
    border-radius: 8px;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
  
  .btn-login-nav {
    background: linear-gradient(135deg, #9333ea 0%, #ec4899 100%);
    color: white;
    box-shadow: 0 2px 6px rgba(147, 51, 234, 0.3);
  }
  
  .btn-login-nav:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(147, 51, 234, 0.4);
  }
  
  .btn-secondary {
    background: #6b7280;
    color: white;
  }
  
  .btn-secondary:hover {
    background: #4b5563;
  }
  
  @media (max-width:800px){
    .nav{padding:10px}
    .nav-toggle{display:block}
    .nav-items{display:none;flex-direction:column;position:fixed;right:12px;left:auto;top:64px;background:#fff;padding:12px;border-radius:10px;box-shadow:0 8px 30px rgba(2,6,23,0.08);min-width:200px;max-width:80%;}
    .nav-items.show{display:flex;align-items:flex-end}
    .nav-item a{padding:10px}
    /* removable: header has no bottom border */
  }
</style>
